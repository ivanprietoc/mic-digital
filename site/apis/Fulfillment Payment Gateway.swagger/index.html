<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="Ivan Prieto">
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Fulfillment Payment Gateway.swagger - Millicom Digital</title>
        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        <script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="../..">Millicom Digital</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li >
                        <a href="../..">Home</a>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Products <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../../catalog/">Catalogo</a>
</li>
                            
<li >
    <a href="../../amazon/">Amazon</a>
</li>
                            
<li >
    <a href="../../tigoshop/">Shop</a>
</li>
                            
<li >
    <a href="../../mitigo/">Mi Tigo</a>
</li>
                            
<li >
    <a href="../../bot/">Bot</a>
</li>
                            
<li >
    <a href="../../mfs/">MFS</a>
</li>
                            
<li >
    <a href="../../mitigo-agent/">Mi Tigo Agent</a>
</li>
                            
<li >
    <a href="../../pos/">Distribution</a>
</li>
                            
<li >
    <a href="../../tbo/">Mi tigo B2B</a>
</li>
                            
<li >
    <a href="../../usa/">Tigo USA</a>
</li>
                            
<li >
    <a href="../../sports/">Tigo Sports</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Enablers <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../..">Tigo ID</a>
</li>
                            
<li >
    <a href="../../payment-gtw/">Payment Gateway</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Apis <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../Mobile Money API - Accounts.swagger/">Mobile Money API   Accounts.swagger</a>
</li>
                            
<li >
    <a href="../AppCallbackPayment Gateway.swagger/">AppCallbackPayment Gateway.swagger</a>
</li>
                            
<li >
    <a href="../AppLinks/">AppLinks</a>
</li>
                            
<li >
    <a href="../B2B Selfcare API.swagger/">B2B Selfcare API.swagger</a>
</li>
                            
<li >
    <a href="../BSSPilot/">BSS Pilot</a>
</li>
                            
<li >
    <a href="../Balance Management Service Api.swagger/">Balance Management Service Api.swagger</a>
</li>
                            
<li >
    <a href="../CallUsageDetails.swagger/">CallUsageDetails.swagger</a>
</li>
                            
<li >
    <a href="../ConvergentPaymentAPI.swagger/">ConvergentPaymentAPI.swagger</a>
</li>
                            
<li >
    <a href="../DeezerTelco/">Deezer Telco</a>
</li>
                            
<li >
    <a href="../Exacaster Next Best Offer API.swagger/">Exacaster Next Best Offer API.swagger</a>
</li>
                            
<li class="active">
    <a href="./">Fulfillment Payment Gateway.swagger</a>
</li>
                            
<li >
    <a href="../GT Point Of Sale [PoS] API.swagger/">GT Point Of Sale [PoS] API.swagger</a>
</li>
                            
<li >
    <a href="../Home Self Care API.swagger/">Home Self Care API.swagger</a>
</li>
                            
<li >
    <a href="../Insurance API.swagger/">Insurance API.swagger</a>
</li>
                            
<li >
    <a href="../Internet Usage Data.swagger/">Internet Usage Data.swagger</a>
</li>
                            
<li >
    <a href="../Mobile Money API - Accounts.swagger/">Mobile Money API   Accounts.swagger</a>
</li>
                            
<li >
    <a href="../Mobile Money API - Transactions.swagger/">Mobile Money API   Transactions.swagger</a>
</li>
                            
<li >
    <a href="../Mobile Money API.swagger/">Mobile Money API.swagger</a>
</li>
                            
<li >
    <a href="../Mobile Self Care API.swagger/">Mobile Self Care API.swagger</a>
</li>
                            
<li >
    <a href="../Modify Favorite Number Api.swagger/">Modify Favorite Number Api.swagger</a>
</li>
                            
<li >
    <a href="../Music Freedom SV API.swagger/">Music Freedom SV API.swagger</a>
</li>
                            
<li >
    <a href="../Netflix partner/">Netflix partner</a>
</li>
                            
<li >
    <a href="../Next Best Action-Offers.swagger/">Next Best Action Offers.swagger</a>
</li>
                            
<li >
    <a href="../OpenTIGO - Billing/">OpenTIGO   Billing</a>
</li>
                            
<li >
    <a href="../OpenTIGO - CRM/">OpenTIGO   CRM</a>
</li>
                            
<li >
    <a href="../OpenTIGO - Common/">OpenTIGO   Common</a>
</li>
                            
<li >
    <a href="../OpenTIGO - Favorites/">OpenTIGO   Favorites</a>
</li>
                            
<li >
    <a href="../OpenTIGO - Lend/">OpenTIGO   Lend</a>
</li>
                            
<li >
    <a href="../OpenTIGO - Push/">OpenTIGO   Push</a>
</li>
                            
<li >
    <a href="../OpenTIGO - Utils/">OpenTIGO   Utils</a>
</li>
                            
<li >
    <a href="../OpenTigo Balance Management/">OpenTigo Balance Management</a>
</li>
                            
<li >
    <a href="../Payment Gateway.swagger/">Payment Gateway.swagger</a>
</li>
                            
<li >
    <a href="../Recharge Service Api.swagger/">Recharge Service Api.swagger</a>
</li>
                            
<li >
    <a href="../SMS Usage Details.swagger/">SMS Usage Details.swagger</a>
</li>
                            
<li >
    <a href="../Self Care API - DESIGN ONLY.swagger/">Self Care API   DESIGN ONLY.swagger</a>
</li>
                            
<li >
    <a href="../Selfcare API Billing.swagger/">Selfcare API Billing.swagger</a>
</li>
                            
<li >
    <a href="../Selfcare API CRM.swagger/">Selfcare API CRM.swagger</a>
</li>
                            
<li >
    <a href="../Selfcare API Transactions.swagger/">Selfcare API Transactions.swagger</a>
</li>
                            
<li >
    <a href="../Sim Swap Events.swagger/">Sim Swap Events.swagger</a>
</li>
                            
<li >
    <a href="../SimCard management API.swagger/">SimCard management API.swagger</a>
</li>
                            
<li >
    <a href="../Tigo - Activation API.swagger/">Tigo   Activation API.swagger</a>
</li>
                            
<li >
    <a href="../Tigo - Profiling API.swagger/">Tigo   Profiling API.swagger</a>
</li>
                            
<li >
    <a href="../Tigo Churn.swagger/">Tigo Churn.swagger</a>
</li>
                            
<li >
    <a href="../Tigo MSISDN Identification API.swagger/">Tigo MSISDN Identification API.swagger</a>
</li>
                            
<li >
    <a href="../Tigo Mobile PY Up-Selling Information API.swagger/">Tigo Mobile PY Up Selling Information API.swagger</a>
</li>
                            
<li >
    <a href="../Tigo Money HN.swagger/">Tigo Money HN.swagger</a>
</li>
                            
<li >
    <a href="../Tigo OAuth 2.0 API.swagger/">Tigo OAuth 2.0 API.swagger</a>
</li>
                            
<li >
    <a href="../TigoMobileProductsFulfillmentAPI/">TigoMobileProductsFulfillmentAPI</a>
</li>
                            
<li >
    <a href="../TigoMobileVASProductManagementAPI/">TigoMobileVASProductManagementAPI</a>
</li>
                            
<li >
    <a href="../UNE Accounts api.swagger/">UNE Accounts api.swagger</a>
</li>
                            
<li >
    <a href="../UberPOS.swagger/">UberPOS.swagger</a>
</li>
                            
<li >
    <a href="../Virtual Appointemnts and Geolocation API.swagger/">Virtual Appointemnts and Geolocation API.swagger</a>
</li>
                            
<li >
    <a href="../apiMobileSelfCare2.0/">apiMobileSelfCare2.0</a>
</li>
                            
<li >
    <a href="../opentigosmartapps-tigoExchange/">opentigosmartapps tigoExchange</a>
</li>
                            
<li >
    <a href="../tigo-events-publisher-node.swagger/">Tigo events publisher node.swagger</a>
</li>
                            
<li >
    <a href="../tigo_b2b_bo_billing_v2.swagger/">Tigo b2b bo billing v2.swagger</a>
</li>
                            
<li >
    <a href="../tigo_b2b_bo_selfcare_crm_v2.swagger/">Tigo b2b bo selfcare crm v2.swagger</a>
</li>
                            
<li >
    <a href="../tigo_b2b_co_billing_v2.swagger/">Tigo b2b co billing v2.swagger</a>
</li>
                            
<li >
    <a href="../tigo_b2b_co_selfcare_crm_v2.swagger/">Tigo b2b co selfcare crm v2.swagger</a>
</li>
                            
<li >
    <a href="../tigo_b2b_co_selfcare_transactions_v2.swagger/">Tigo b2b co selfcare transactions v2.swagger</a>
</li>
                            
<li >
    <a href="../tigo_b2b_gt_selfcare_crm_v2.swagger/">Tigo b2b gt selfcare crm v2.swagger</a>
</li>
                            
<li >
    <a href="../tigo_b2b_hn_billing_v2.swagger/">Tigo b2b hn billing v2.swagger</a>
</li>
                            
<li >
    <a href="../tigo_co_customerSupport_v1.swagger/">tigo co customerSupport v1.swagger</a>
</li>
                            
<li >
    <a href="../tigo_co_selfcare_crm_v1.swagger/">Tigo co selfcare crm v1.swagger</a>
</li>
                            
<li >
    <a href="../tigo_crm_co_digitalDocuments_v2.swagger/">tigo crm co digitalDocuments v2.swagger</a>
</li>
                            
<li >
    <a href="../tigo_home_sv_billing_v1.swagger/">Tigo home sv billing v1.swagger</a>
</li>
                            
<li >
    <a href="../tigo_mobile_bo_crm_v1.swagger/">Tigo mobile bo crm v1.swagger</a>
</li>
                            
<li >
    <a href="../tigo_mobile_gt_roaming_v1.swagger/">Tigo mobile gt roaming v1.swagger</a>
</li>
                            
<li >
    <a href="../tigo_sv_selfcare_crm_v1.swagger/">Tigo sv selfcare crm v1.swagger</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Procesess <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../../processes/devBestPractices/">How we work for Devs</a>
</li>
                            
<li >
    <a href="../../processes/devLifeCycle/">Development life cycle</a>
</li>
                        </ul>
                    </li>
                </ul>

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                    <li >
                        <a rel="next" href="../Exacaster Next Best Offer API.swagger/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../GT Point Of Sale [PoS] API.swagger/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#fulfillment-payment-gateway">Fulfillment Payment Gateway</a></li>
            <li><a href="#security">Security</a></li>
            <li><a href="#producttypeidtypeidpaymentregistrations">/{productType}/{idType}/{id}/paymentregistrations/</a></li>
            <li><a href="#producttypeidtypeidpaymentregistrationspaymentregistrationid">/{productType}/{idType}/{id}/paymentregistrations/{paymentRegistrationId}</a></li>
            <li><a href="#models">Models</a></li>
            <li><a href="#paymentregistrationinfo">PaymentRegistrationInfo</a></li>
            <li><a href="#link">Link</a></li>
            <li><a href="#billtoaddress">BillToAddress</a></li>
            <li><a href="#itemdetail">ItemDetail</a></li>
            <li><a href="#namevaluepairlist">NameValuePairList</a></li>
            <li><a href="#namevaluepair">NameValuePair</a></li>
            <li><a href="#paymentinstrument">PaymentInstrument</a></li>
            <li><a href="#paymentregistrationresponselist">PaymentRegistrationResponseList</a></li>
            <li><a href="#paymentregistrationresponse">PaymentRegistrationResponse</a></li>
            <li><a href="#error">Error</a></li>
            <li><a href="#errorbody">errorBody</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="fulfillment-payment-gateway">Fulfillment Payment Gateway</h1>
<p>This the especific description for the API for a centralized Fulfillment Payment Gateway, this documentation is in swagger-2.0 specification. </p>
<p>This solution is to be used in all countries, each country will be indentified in the path. This solution covers the registration of a payment to be applied to services or products, and it is agnostic to the provisioning details.
Each country may provide several APIs to cover the wide range of business units and product categories that are offered. Both the business unit and the product category will be part 
of the path. </p>
<p>The API Proxy will group all the fulfillment methods a country offers, and will be named <b>tigo_{country}_fulfillment_v1</b></p>
<p>So the base for each proxy wiil be: </p>
<p><b><code>/v1/tigo/{country}/fulfillment</code></b></p>
<p>And then the path will include the business unit and product type:</p>
<p><b><code>/{businessunit}/{productType}</code></b></p>
<p>Suggested Examples:
<em> <code>/v1/tigo/gt/fulfillment/mobile/topups/</code>
</em> <code>/v1/tigo/sv/fulfillment/home/invoices/</code>
* <code>/v1/tigo/gt/fulfillment/invoices/</code> 
[For a convergente payment businessUnit is ommited]</p>
<p>These methods will allow the use of different identifiers for the services and products being paid, since some services will requires the MSISDN, others like Home the contractId.
Even more specific identifiers like billingAccountId or subscriptionNumber may be needed. 
To address this scenerio of multiple possible ids, the path includes two variables: idType and id. </p>
<p><b>idType</b>: The type of identification being used expressed in a "domain" form.</p>
<p><b>id</b>: The unique identifier within the domain.</p>
<p>Common combinations include:
<em> <code>/subscribers/{msisdn}</code> -&gt; also knows as the mobileid in TigoId
</em> <code>/contracts/{contractId}</code> -&gt; also know as the homeid in TigoId
<em> <code>/billingaccounts/{billingAccountId}</code> -&gt; The unique identifier within the billing system
</em> <code>/subscriptions/{subscriptionNumber}</code> -&gt; The unique idenetifier in the provisioning platform</p>
<p>Use of identifications like Cedula or NIT are not recommended since they may be ambiogus on how to apply the payment if the customer have several services.</p>
<p>Full Path Samples:
<em> <code>/v1/tigo/gt/fulfillment/mobile/topups/subscribers/3053083937</code>
</em> <code>/v1/tigo/sv/fulfillment/sv/home/invoices/contracts/1234567890</code>    </p>
<p>We are going to usse HATEOAS Driven REST APIs. 
HATEOAS (Hypermedia as the Engine of Application State) is a constraint of the REST application architecture that keeps the RESTful style architecture unique from most other network application architectures.
What this means is that the body will include links with additional details and actions that can be triggered for this transaction. By providing the links, there is no need to know in advance which are the URLs needed to take those actions.
Examples of these links include
<em> A link to query information about the payment instrument used. In case of a credit card, masked information about the card can be retrieved in the provided link.
</em> A link to request a rollback of the payment. Although we want to avoid this situation and we want to manage all rollbacks within the Regional Orchestration Module, if for some reason this is needed, the link to trigger this action will be provided.</p>
<p><i>This is the MVP. In this section we will be summarizing all the doubts that are raised with the teams of the different teams to remain with the questions and their respective answers.</i></p>
<p>The details of the related concepts are described in the following document-</p>
<p>https://millicom-my.sharepoint.com/personal/andres_cavallin_millicom_com/_layouts/15/guestaccess.aspx?guestaccesstoken=JvRZ65J8I9FUZpUwLQRYJWRPu8%2fgVvaA2zUCn0BMm4s%3d&amp;docid=2_121c58b7e6f6043a1a37d9ff3edf9a2d5&amp;rev=1</p>
<p><strong>Version:</strong> 1.0.0</p>
<p><strong>Terms of service:</strong><br />
http://swagger.io/terms/</p>
<p><strong>Contact information:</strong><br />
Armando Umerez<br />
http://www.millicom.com<br />
armando.umerez@millicom.com  </p>
<p><strong>License:</strong> <a href="http://github.com/gruntjs/grunt/blob/master/LICENSE-MIT">MIT</a></p>
<h3 id="security">Security</h3>
<hr />
<p><strong>backend_auth</strong>  </p>
<table>
<thead>
<tr>
<th>apiKey</th>
<th><em>API Key</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>Description</td>
<td>This is the security that must be implemented by the countries, in addition to any authentication mechanism they have, this additional security serves to sign the message. Since the message is signed, the country can be sure the payment is real and that it was not forged by any other party, for example, a developer with access to Apigee.  Another benefit of the Token is that the token can be passed through proxies without the need for those proxies to know the signing details and password.        Use of JWT standard was discarded since JWT allows for for the caller to set the hash algorithm to 'None', effectively bypassing the security. For that reason we are going to force the algorithm to HMAC with SHA-256 using a pre-shared key.  The payload to be signed will include the following values:  'productType' + 'IdType' + 'id' +  'paymentGatewayTransactionId' +  'paymentCurrencyId' + 'paymentAmount' +  'RegistrationDate' + '[pre-shared secret]'</td>
</tr>
<tr>
<td>Name</td>
<td>Token</td>
</tr>
<tr>
<td>In</td>
<td>header</td>
</tr>
</tbody>
</table>
<p><strong>apigee_auth</strong>  </p>
<table>
<thead>
<tr>
<th>oauth2</th>
<th><em>OAuth 2.0</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>Description</td>
<td>This is the security implemented in Apigee Proxy. Any party in possession of a bearer token (a "bearer") can use it to get access to the associated resources (without demonstrating possession of a cryptographic key). To prevent misuse, bearer tokens need to be protected from disclosure in storage and in transport.</td>
</tr>
<tr>
<td>Flow</td>
<td>accessCode</td>
</tr>
<tr>
<td>Authorization URL</td>
<td>https://prod.api.tigo.com/oauth/client_credential/accesstoken?grant_type=client_credentials</td>
</tr>
<tr>
<td>Token URL</td>
<td>https://myapp.tigo.com/tigoid/callback</td>
</tr>
<tr>
<td><strong>Scopes</strong></td>
<td></td>
</tr>
<tr>
<td>openid</td>
<td>Used to identify this API is compliant with the OpenID Connect 1.0 specification</td>
</tr>
</tbody>
</table>
<h3 id="producttypeidtypeidpaymentregistrations">/{productType}/{idType}/{id}/paymentregistrations/</h3>
<hr />
<h5 id="get"><strong><em>GET</em></strong></h5>
<p><strong>Summary:</strong> Get Payment Registrations By IdType And Id</p>
<p><strong>Description:</strong> Get Payment Registrations. Returns all transactions that were made to the specified id in the domain of idType.</p>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Located in</th>
<th>Description</th>
<th>Required</th>
<th>Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td>productType</td>
<td>path</td>
<td>Product Category Name for which this payment registration is intended</td>
<td>Yes</td>
<td>string</td>
</tr>
<tr>
<td>idType</td>
<td>path</td>
<td>Type of the Unique number of identification in the billing system</td>
<td>Yes</td>
<td>string</td>
</tr>
<tr>
<td>id</td>
<td>path</td>
<td>Unique number of identification in the billing system</td>
<td>Yes</td>
<td>string</td>
</tr>
</tbody>
</table>
<p><strong>Responses</strong></p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td>200</td>
<td>List of payments registrations responses</td>
<td><a href="#paymentregistrationresponselist">PaymentRegistrationResponseList</a></td>
</tr>
<tr>
<td>403</td>
<td>Forbidden. Check <code>error.message</code> for details</td>
<td><a href="#errorbody">errorBody</a></td>
</tr>
<tr>
<td>404</td>
<td>the specified <code>contractId</code> was not found</td>
<td><a href="#errorbody">errorBody</a></td>
</tr>
<tr>
<td>default</td>
<td>unexpected error</td>
<td><a href="#errorbody">errorBody</a></td>
</tr>
</tbody>
</table>
<h5 id="post"><strong><em>POST</em></strong></h5>
<p><strong>Summary:</strong> Create Payment Registration By IdType And Id</p>
<p><strong>Description:</strong> Create a new payment registration for the specified Id in the domain of IdType. Provisioning to be handled by the backend.</p>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Located in</th>
<th>Description</th>
<th>Required</th>
<th>Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td>productType</td>
<td>path</td>
<td>Product Category Name for which this payment registration is intended</td>
<td>Yes</td>
<td>string</td>
</tr>
<tr>
<td>idType</td>
<td>path</td>
<td>Type of the Unique number of identification in the billing system</td>
<td>Yes</td>
<td>string</td>
</tr>
<tr>
<td>id</td>
<td>path</td>
<td>Unique number of identification in the billing system</td>
<td>Yes</td>
<td>string</td>
</tr>
<tr>
<td>payment</td>
<td>body</td>
<td>description of the product that they are going to use</td>
<td>Yes</td>
<td><a href="#paymentregistrationinfo">PaymentRegistrationInfo</a></td>
</tr>
</tbody>
</table>
<p><strong>Responses</strong></p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td>200</td>
<td>Payment registration successfully received, validated and was processed synchronously by backend. Commit payment.</td>
<td><a href="#paymentregistrationresponse">PaymentRegistrationResponse</a></td>
</tr>
<tr>
<td>201</td>
<td>Payment registration successfully received, validated and will be processed asynchronously by backend. Commit payment.</td>
<td><a href="#paymentregistrationresponse">PaymentRegistrationResponse</a></td>
</tr>
<tr>
<td>202</td>
<td>Payment registration successfully received but has not been validated. Processing by backend may still fail. Don't Commit payment.</td>
<td><a href="#paymentregistrationresponse">PaymentRegistrationResponse</a></td>
</tr>
<tr>
<td>403</td>
<td>Forbidden. Check <code>error.message</code> for details. Rollback payment.</td>
<td><a href="#errorbody">errorBody</a></td>
</tr>
<tr>
<td>404</td>
<td>The specified <code>IdType</code> and <code>Id</code> cannot be processed. Rollback payment.</td>
<td><a href="#errorbody">errorBody</a></td>
</tr>
<tr>
<td>409</td>
<td>Duplicate Payment Registration. Not accepted. Use <code>Get Payment Registration By Payment Registration Id</code> to determine course of action.</td>
<td><a href="#errorbody">errorBody</a></td>
</tr>
<tr>
<td>412</td>
<td>Parameters validation failed. Will not accept. Rollback payment.</td>
<td><a href="#errorbody">errorBody</a></td>
</tr>
<tr>
<td>default</td>
<td>unexpected error. Use <code>Get Payment Registration By Payment Registration Id</code> to determine course of action.</td>
<td><a href="#errorbody">errorBody</a></td>
</tr>
</tbody>
</table>
<h3 id="producttypeidtypeidpaymentregistrationspaymentregistrationid">/{productType}/{idType}/{id}/paymentregistrations/{paymentRegistrationId}</h3>
<hr />
<h5 id="get_1"><strong><em>GET</em></strong></h5>
<p><strong>Summary:</strong> Get Payment Registration By IdType And Id And Payment Registration Id</p>
<p><strong>Description:</strong> Get the Payment Registration specified bu the provided Id. 
If the transaction does not exists a 404 is expected. Payment can be rollbacked.
If the transaction is being processed and has not finished a 202 must be returned. Payment cannot be commited yet.
If the transaction was processed a 200 OK is expected and payment can be commited.</p>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Located in</th>
<th>Description</th>
<th>Required</th>
<th>Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td>paymentRegistrationId</td>
<td>path</td>
<td>This is the id number of the transaction</td>
<td>Yes</td>
<td>string</td>
</tr>
<tr>
<td>productType</td>
<td>path</td>
<td>Product Category Name for which this payment registration is intended</td>
<td>Yes</td>
<td>string</td>
</tr>
<tr>
<td>idType</td>
<td>path</td>
<td>Type of the Unique number of identification in the billing system</td>
<td>Yes</td>
<td>string</td>
</tr>
<tr>
<td>id</td>
<td>path</td>
<td>Unique number of identification in the billing system</td>
<td>Yes</td>
<td>string</td>
</tr>
</tbody>
</table>
<p><strong>Responses</strong></p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td>200</td>
<td>Payment registration was received and payment can be commited.</td>
<td><a href="#paymentregistrationresponse">PaymentRegistrationResponse</a></td>
</tr>
<tr>
<td>202</td>
<td>Payment registration was received but still being processed. Payment cannot be commited yet.</td>
<td><a href="#paymentregistrationresponse">PaymentRegistrationResponse</a></td>
</tr>
<tr>
<td>403</td>
<td>Forbidden. Check <code>error.message</code> for details</td>
<td><a href="#errorbody">errorBody</a></td>
</tr>
<tr>
<td>404</td>
<td>the specified <code>PaymentRegistrationId</code> was not found. Payment can be rollbacked.</td>
<td><a href="#errorbody">errorBody</a></td>
</tr>
<tr>
<td>default</td>
<td>unexpected error</td>
<td><a href="#errorbody">errorBody</a></td>
</tr>
</tbody>
</table>
<h3 id="models">Models</h3>
<hr />
<h3 id="paymentregistrationinfo">PaymentRegistrationInfo</h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>productReference</td>
<td>string</td>
<td>This is the uniqued identifier that may be needed to complement the productType. For example if the productType is "packets", the productReference may be a packet identifier.</td>
<td></td>
</tr>
<tr>
<td>Or if the productType is "invoices" then the productReference will be the Invoice Reference Number.</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>No</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>invoiceReferenceNumber</td>
<td>string</td>
<td>This is the uniqued identifier of the INVOICE being paid, some of our countries allow for incomplete amounts</td>
<td>No</td>
</tr>
<tr>
<td>paymentAmount</td>
<td>number</td>
<td>Amount to be paid for the particular invoice and ContractNumber.</td>
<td>Yes</td>
</tr>
<tr>
<td>paymentCurrencyId</td>
<td>string</td>
<td>Three digit ISO identifier of the currency in which the payment is being posted.</td>
<td>Yes</td>
</tr>
<tr>
<td>customerType</td>
<td>string</td>
<td>This is an enumeration of customerTYPES MOBILE HOME B2B</td>
<td>No</td>
</tr>
<tr>
<td>custumerIdType</td>
<td>string</td>
<td>This is the type of the document that the user have.</td>
<td>No</td>
</tr>
<tr>
<td>customerId</td>
<td>string</td>
<td>This is the unique identifier of the customer for millicom. In the following way</td>
<td>No</td>
</tr>
<tr>
<td>paymentGatewayTransactionId</td>
<td>string</td>
<td>This is the TransactionID of our Millicom Payment Gateway</td>
<td>Yes</td>
</tr>
<tr>
<td>paymentProcessortransactionId</td>
<td>string</td>
<td>This is the TransactionID of the Processing Partner, at the point of writing this documentation this is the Cybersource Payment Gateway transactionID</td>
<td>No</td>
</tr>
<tr>
<td>paymentProcessorId</td>
<td>string</td>
<td>Id of the processor identification, this must be a descriptive indetificator</td>
<td>No</td>
</tr>
<tr>
<td>authorizationCode</td>
<td>string</td>
<td>This is the authorization code of the reconciliation</td>
<td>No</td>
</tr>
<tr>
<td>merchantId</td>
<td>string</td>
<td>Id of the Merchant code registered on the bank institution</td>
<td>No</td>
</tr>
<tr>
<td>merchantName</td>
<td>string</td>
<td>Friendly name of the Merchant registered on the bank institution</td>
<td>No</td>
</tr>
<tr>
<td>paymentRegistrationAttemptId</td>
<td>string</td>
<td>Id fulfillmentEngine Transaction</td>
<td>No</td>
</tr>
<tr>
<td>paymentChannel</td>
<td>string</td>
<td>Channel where the invoice is being marked from.</td>
<td>No</td>
</tr>
<tr>
<td>registrationDate</td>
<td>date</td>
<td>Date when the payment was registered in ISO 8601 format</td>
<td>Yes</td>
</tr>
<tr>
<td>purchaseOrderId</td>
<td>string</td>
<td>This is the purchase order number of the app.</td>
<td>No</td>
</tr>
<tr>
<td>customerEmail</td>
<td>string</td>
<td>An email address associated with this payment</td>
<td>No</td>
</tr>
<tr>
<td>phoneNumber</td>
<td>string</td>
<td>Phone number associated with this payment registration</td>
<td>No</td>
</tr>
<tr>
<td>customerIpAddress</td>
<td>string</td>
<td>IP Address from client that submitted the registration, if it was online.</td>
<td>No</td>
</tr>
<tr>
<td>BillToAddress</td>
<td><a href="#billtoaddress">BillToAddress</a></td>
<td></td>
<td>No</td>
</tr>
<tr>
<td>paymentInstrument</td>
<td><a href="#paymentinstrument">PaymentInstrument</a></td>
<td></td>
<td>No</td>
</tr>
<tr>
<td>ItemDetailList</td>
<td>[ <a href="#itemdetail">ItemDetail</a> ]</td>
<td>This is an array of the differents items in the purchase</td>
<td>No</td>
</tr>
<tr>
<td>nameValuePairList</td>
<td><a href="#namevaluepairlist">NameValuePairList</a></td>
<td></td>
<td>No</td>
</tr>
<tr>
<td>links</td>
<td>[ <a href="#link">Link</a> ]</td>
<td>This is an array with the options that they can operate with the response. This is the aplicatino of HATEOAS</td>
<td>No</td>
</tr>
</tbody>
</table>
<h3 id="link">Link</h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>href</td>
<td>string</td>
<td>This is the url of the method, in the first aproach we are going to use get order information and payment information. With this architecture we can use it asynchronous</td>
<td>No</td>
</tr>
<tr>
<td>rel</td>
<td>string</td>
<td>Description of the action in the method</td>
<td>No</td>
</tr>
<tr>
<td>method</td>
<td>string</td>
<td>Name of the HTTP method.</td>
<td>No</td>
</tr>
</tbody>
</table>
<h3 id="billtoaddress">BillToAddress</h3>
<p>This is the information about the billing address</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>firstName</td>
<td>string</td>
<td>This is the name of the item, is the exact name that user must read.</td>
<td>No</td>
</tr>
<tr>
<td>lastName</td>
<td>string</td>
<td>This is the description of the item.</td>
<td>No</td>
</tr>
<tr>
<td>country</td>
<td>string</td>
<td>This is the country of the address</td>
<td>No</td>
</tr>
<tr>
<td>city</td>
<td>string</td>
<td>This is the city of the address</td>
<td>No</td>
</tr>
<tr>
<td>street</td>
<td>string</td>
<td>This is the street of the address</td>
<td>No</td>
</tr>
<tr>
<td>postalCode</td>
<td>string</td>
<td>This is the postal code of the address</td>
<td>No</td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td>This is the state of the address</td>
<td>No</td>
</tr>
</tbody>
</table>
<h3 id="itemdetail">ItemDetail</h3>
<p>This is the detail of the item</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>string</td>
<td>This is the name or Id of the item, is the exact name that user must read.</td>
<td>No</td>
</tr>
<tr>
<td>quantity</td>
<td>number</td>
<td>Quantity of the item</td>
<td>No</td>
</tr>
<tr>
<td>amount</td>
<td>double</td>
<td>This is the amount in a double</td>
<td>No</td>
</tr>
</tbody>
</table>
<h3 id="namevaluepairlist">NameValuePairList</h3>
<p>An array of Name and Value pair to pass generic data</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>NameValuePairList</td>
<td>array</td>
<td>An array of Name and Value pair to pass generic data</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="namevaluepair">NameValuePair</h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>string</td>
<td>This is the name of the of data</td>
<td>No</td>
</tr>
<tr>
<td>value</td>
<td>string</td>
<td>this is the value</td>
<td>No</td>
</tr>
</tbody>
</table>
<h3 id="paymentinstrument">PaymentInstrument</h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>paymentMethodId</td>
<td>number</td>
<td>Id of the Payment Instrument used for the payment</td>
<td>No</td>
</tr>
<tr>
<td>paymentMethodName</td>
<td>string</td>
<td>Friendly Name of the Payment Instrument used for the payment</td>
<td>No</td>
</tr>
<tr>
<td>maskedAccountId</td>
<td>string</td>
<td>For credit cards, first 4 and last 6. For other payment types, the accountid masked according to security best practices. For MFS it could be the MSISDN</td>
<td>No</td>
</tr>
<tr>
<td>expirationDate</td>
<td>date</td>
<td></td>
<td>No</td>
</tr>
<tr>
<td>bankName</td>
<td>string</td>
<td>The bank institution associated witht he payment</td>
<td>No</td>
</tr>
<tr>
<td>cardBrand</td>
<td>string</td>
<td>Franchise or Brand of the registered card</td>
<td>No</td>
</tr>
<tr>
<td>tokenized</td>
<td>boolean</td>
<td>True if the credit card information came from a token and not from user input</td>
<td>No</td>
</tr>
</tbody>
</table>
<h3 id="paymentregistrationresponselist">PaymentRegistrationResponseList</h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>PaymentRegistrationResponseList</td>
<td>array</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="paymentregistrationresponse">PaymentRegistrationResponse</h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>paymentRegistrationId</td>
<td>string</td>
<td>This is the id of this payment registration in the billing system.</td>
<td>Yes</td>
</tr>
<tr>
<td>paymentGatewayTransactionId</td>
<td>string</td>
<td>This is the id of the payment on the Payment Gateway. This is id was sent on the Create Payment Registration</td>
<td>Yes</td>
</tr>
<tr>
<td>registrationDate</td>
<td>date</td>
<td>Date when the payment was registered in ISO 8601 format</td>
<td>Yes</td>
</tr>
<tr>
<td>paymentCurrencyId</td>
<td>string</td>
<td>Three digit ISO identifier of the currency in which the payment is being posted.</td>
<td>No</td>
</tr>
<tr>
<td>paymentAmount</td>
<td>number</td>
<td>Amount to be paid for the particular invoice and ContractNumber.</td>
<td>Yes</td>
</tr>
<tr>
<td>PaymentActionId</td>
<td>string</td>
<td>See PaymentActionName for description.</td>
<td>No</td>
</tr>
<tr>
<td>PaymentActionName</td>
<td>string</td>
<td>[0-Commit] The Payment Registration was received and validated. Payment must be commited.</td>
<td></td>
</tr>
<tr>
<td>For consistency both HTTP 200 and HTTP 201 must return 0-Commit.</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>[1-Rollback] The Payment Registration was received but an error ocurred while processing it asynchronously on the backend. Payment must be rollbacked.</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>For consistency, only transactions that returned HTTP 202 during creation are allowed to return 1-Rollback when queried.</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>[2-Wait] The Payment Registration was received but still being processed.</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>For consistency, only transactions that returned HTTP 202 during creation or transaction that timed out and never returned a response can return the 2-Wait action.</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>No</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>Success Message from platform. May be ommited.</td>
<td>No</td>
</tr>
</tbody>
</table>
<h3 id="error">Error</h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>code</td>
<td>integer</td>
<td></td>
<td>Yes</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td></td>
<td>Yes</td>
</tr>
</tbody>
</table>
<h3 id="errorbody">errorBody</h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>code</td>
<td>integer</td>
<td></td>
<td>Yes</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td></td>
<td>Yes</td>
</tr>
</tbody>
</table></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>var base_url = '../..';</script>
        <script src="../../js/base.js"></script>
        <script src="../../search/require.js"></script>
        <script src="../../search/search.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td><kbd>&larr;</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td><kbd>&rarr;</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>


    </body>
</html>
